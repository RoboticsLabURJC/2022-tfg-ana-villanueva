---
title: "Semana 5. Aframe"
categories:
  - Etapa de Entrenamiento
  - Junio
tags:
  - A-frame
  - JavaScript
youtubeId: 
---


Nos adentramos en la quinta semana del blog. Los retos indicados son:

> Utilizar Blender y continuar investigando sobre el concepto 'malla de colisión'.

> Continuar jugando con las físicas. 

> Charlar con David Moreno (email enviado).


## **Blender**

* [Descargar](https://www.blender.org/)

Nota: *No he profundizado en este tema, ya que dada la falta de un monitor extra no puedo seguir los tutoriales facilmente, por ello, estoy a la espera de obtenerlo.*

## **Malla de colisión**

Existen mallas de colisión de diferentes formas, por ello, se ha de seleccionar aquella que mejor se ajuste al objeto en cuestión. Hay dos tipos, mediante un ajuste automático o su modificación. 

Entre los parámetros de las físicas encontramos *debug* que cuando está a *true* muestra la malla de colisión de los objetos de la escena, lo cual es útil para visualizar los cambios en nuestra malla. Por otro lado, *ammo-shape* otorga la forma y el tamaño de nuestra malla de colisión, por tanto, observando la documentación podemos modificarla a nuestro antojo. 

A continuación, tenemos la parte del código que ha sido transformada para obtener una nueva malla de colisión seguido del video en que podemos ver nuestro HTML.

  
  ammo-shape="type: sphere; fit: manual; sphereRadius:3;"
  

{% include video id="Z-PMK80MOR8 " provider="youtube" %}

También se ha modificado la malla de colisión de una caja, como puede observarse en la siguiente imagen, usando el siguiente código:

  
  ammo-shape="type: box; fit: manual; halfExtents: 2 2 2;"
  

![Malla colisión](https://raw.githubusercontent.com/RoboticsLabURJC/2022-tfg-ana-villanueva/main/otros/27J/cap1.png)

## **Físicas**

Masa: Objetos con diferente masa llegarán al mismo tiempo a tierra, si son tirados desde la misma altura, ya que tienen exactamente la misma aceleración. *mass*

Resistencia al movimiento: Objetos con resistencias al movimiento muy elevadas no lograrán ponerse en movimiento. *linearDamping*

* Aframe 

1. Modificación de las físicas al hacer click en la tecla 'Espacio'. [Julio/27J/phy_ex1.html]

En el siguiente ejemplo al pulsar la tecla 'Espacio' se cambiará la resistencia al movimiento y el color de la esfera. El segundo cambio fue propuesto para comprobar el funcionamiento y que todo fuera correcto, ya que al cambiar la resistencia al movimiento ambas esferas siguen cayendo a la misma velocidad, pero el atributo se ha cambiado correctamente. ¿Cómo sabemos que el cambio se ha dado? 

  
    console.log(red.getAttribute('ammo-body').linearDamping);
    console.log(blue.getAttribute('ammo-body').linearDamping);
  

![Parámetro modificado](https://raw.githubusercontent.com/RoboticsLabURJC/2022-tfg-ana-villanueva/main/otros/27J/cap2.png)

Por tanto, si el atributo se ha cambiado ¿por qué no se refleja a nivel visual?

2. Modificación de las físicas al hacer click en la tecla 'Espacio'. [Julio/27J/phy_ex2.html]

A continuación, vamos a resolver el problema encontrado en el aparato uno. Tras darle un par de vueltas he llegado a la conclusión de que lo mejor era eliminar todos los parámetros e introducirlos de nuevo, lo cual ha funcionado. Se debe tener en cuenta que también es necesario eliminar *ammo-shape*, ya que en caso contrario perdemos la malla de colisión. 

  
    if (name == ' ') {
        red.removeAttribute('ammo-body');
        red.removeAttribute('ammo-shape');
        red.setAttribute('ammo-body', {
          type: 'dynamic',
          emitCollisionEvents: true,
          gravity: '0 -9.8 0',
          linearDamping: '0.1'
        });

        red.setAttribute('ammo-shape', {
          type: 'sphere'
        });

        red.setAttribute('material', {
          color: 'green'
        });
    }
  

{% include video id="ZLVgwv0z7Ks " provider="youtube" %}
 

* Networked Aframe

Entre los problemas dados la semana pasada encontramos lo siguiente:

1. Modificación de los valores de las físicas al hacer click en la tecla 'Espacio'. [Julio/6J/naf-tutorial/examples/271Jhtml] 

En este ejemplo buscamos que los usuarios introduzcan la gravedad deseada para la escena. Al pulsar la tecla 'Espacio' será necesario introducir la gravedad en 'x y z'. En el código de este ejemplo no es indicado que la esfera se trata de un objeto dinámico hasta pulsar, por ello, no es necesario elimminar los valores dados anteriormente (no existen), pero en el instante que anteriormente existan estos parámetros se tendrán que eliminar. 

Nota: *Única forma que logro de que haya sincronización, es decir, no logro que haya sincronización si anteriormente hay parámetros *ammo-body* y *ammo-shape* *

2. Eliminación del suelo que sujeta una esfera dinámica. [Julio/6J/naf-tutorial/examples/271Jhtml]

En este ejemplo buscamos que al eliminar el suelo, tras realizar click en el *mouse*, la esfera siga cayendo. Como ya hemos visto anteriormente es importante eliminar los atributos *ammo-body* y *ammo-shape* para, inmediamente, indicarlos de nuevo. 

{% include video id="KA8YhqklPNU " provider="youtube" %}
 
Nota: *Funciona el navegadores como Chrome y Mozilla, pero por privacidad he utilizado otro para grabar el vídeo*


## **David Moreno**

Cita Viernes 29 Julio 2022 a las 14:00h.


