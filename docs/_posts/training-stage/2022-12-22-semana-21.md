---
title: "Semana 21. Kibotics-websim"
categories:
  - Etapa de Entrenamiento
  - Diciembre
tags:
  - Networked Aframe
youtubeId: 
---

Nos adentramos en la vigesimosegunda semana del blog. Los retos indicados son:

> Incluir NAF en Kibotics-websim
> Incluir NAF en Django


# Incluir NAF en Kibotics-websim

## Servidores

Hemos de tener en cuenta la existencia de dos servidores, el que construye la página web y el que permite la comunicación entre navegadores. Por tanto, se ha de añadir el servidor *adapter*. **¿Cómo?**

Por un lado, **¿cómo se inicia el servidor *adapter*?** Una vez tenemos instalado NAF en local, tras seguir la guía *Getting started*, podemos lanzar únicamente el servidor de comunicación usando el siguiente comando: **node ./server/easyrtc-server.js** 

Es importante iniciar el servidor de comunicación antes de lanzar aplicación. 

Por otro lado, **¿cómo añadimos NAF en el proyecto?** Una vez hemos comprendido lo anterior hemos de añadir el archivo **easyrtc.js**, encargado de la comunicación, en el interior de JavaScript-editor\dist. 

    <script src="./dist/easyrtc.js"></script> 
    <script src="https://unpkg.com/networked-aframe@^0.8.3/dist/networked-aframe.min.js"></script>

Una vez comprobamos que no se dan errores hemos de modificar la definición de la escena, ya que hemos de indicar dónde se encuentra el servidor que permite la comunicación, en mi caso en localhost:8080. Cómo es sabido en NAF se indican las características en el interior de la escena, del siguiente modo:

    "scene": {
      "id": "scene",
      
      "ground": "../assets/textures/bump&go.png",
      "sky": "../assets/textures/sky.png",
      "background": "color: gray;",
      "inspector": "url: https://aframe.io/releases/0.4.0/aframe-inspector.min.js",
      "embedded": true,
      "physics": "driver: ammo; debug: true; ",
      "networked-scene": "adapter: wseasyrtc; serverURL: http://localhost:8080"
      
    },

En mi caso el servidor es el local, pero en caso de que fuera externo en **serverURL** se tendría que indicar la URL. 

## Definición de la escena 

El siguiente problema es la definición de la escena, ya que en Networked-Aframe se usan *templates*. 

> Definición 

      <a-assets>
        <template id="sphere-template">
          <a-entity 
          class="raycastable" 
          geometry="primitive: sphere" 
          material="color: red" 
          position="0 10 -10" 
          ></a-entity>
        </template>

        <template id="floor-template">
            <a-entity
            geometry="primitive: plane" 
            material="color: blue" 
            position="0 0 -10"
            scale="15 15 15"
            rotation="-90 0 0"></a-entity>
        </template>
      </a-assets>
      <!--
        Permmite visualizar el contenido en el navegador
      -->
      <a-entity id="sphere" 
      networked="template:#sphere-template;networkId:sphere;persistent:true;owner:scene">
      </a-entity>

      <a-entity id="floor" 
      networked="template:#floor-template;networkId:floor;persistent:true;owner:scene">
      </a-entity>
      

# Incluir NAF en Django
