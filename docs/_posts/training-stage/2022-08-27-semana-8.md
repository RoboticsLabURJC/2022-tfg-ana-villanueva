---
title: "Semana 8. A-frame"
categories:
  - Etapa de Entrenamiento
  - Agosto
tags:
  - A-frame
youtubeId: 
---


Nos adentramos en la octava semana del blog. Los retos indicados son:

> Malla de colisión

> Maestro - Esclavo 

> Enriquecer motor de físicas 

# Malla de colision

# Maestro - Esclavo

Buscamos que en el presente proyecto unicamente uno de los usuarios tenga la capacidad de activar las fisicas, ya que hemos observado como de esta manera cada jugador se identifica de forma predeterminada como maestro o esclavo y se obtiene un buen resultado. 

1. A continuacion voy a intentar que el primer usuario que inicialice la escena sea aquel que tiene el poder de las fisicas y que el otro usuario sea un mero espectador. 

Parece ser que es necesario un *document.addEventListener()* para poder compartir entre usuarios valores, ya que desde funciones *init* no se obtienen resultados.

2. Creación de un *window.addEventListener('load')* que funcione de manera inmediata al iniciar el usuario la escena. De nuevo, no parece ser una opción adecuada, ya que no se obtienen los resultados buscados. 

3. Uso de *document.addEventListerner('keydown')* y dos variables, uno de ellas común y otra individual. [A217.html]()

Si la variable común al pulsar el usuario la tecla 'm' del teclado es igual a *false* transformaremos su valor y la de la variable individual a *true*. Por tanto, si usamos la tecla espacio para modificar el color de la esfera solo se logrará si la variable individual es igual a *true*. 

El resultado obtenido es adecuado, pero el usuario ha de tener en cuenta que para iniciar el juego uno de ellos ha de proclamarse maestro. 

    <script>
            var text = document.querySelector('#text');
            var sphere = document.querySelector('#sphere');
            var individual = "false";
            //Evento carga de la escena completada
            document.addEventListener('keydown', (event) => {
              var name = event.key;
              var code = event.code;
              /*
                Variable 'comun' determina el comportamiento maestro-esclavo
                Aquel navegador que pulse la tecla 'm' en primer lugar sera el que se comporte como maestro
              */
              if (name == "m") {
                if (this.text.getAttribute('text').value == "false") {
                  individual = "true";
                  this.text.setAttribute('text',{
                          value: 'true'
                  });
                  NAF.utils.takeOwnership(this.text);

                  console.log(individual);
                }else{
                  individual == "false";      
                }
              }

              if (name == " ") {
                if (individual == "true") {
                  this.sphere.setAttribute('material', {
                      color: "black"
                  });
                  NAF.utils.takeOwnership(this.sphere);
                }
              }
            });
    </script>



