
---
title: "Semana 17. Kibotic-Websim"
categories:
  - Etapa de Entrenamiento
  - Noviembre

Nos adentramos en la decimoseptima semana del blog. Los retos indicados son:

> Trastear con D1 
> Modificación D1 

# Trastear con D1

Nota: **¿Dónde es creado el miniproxy?**


> #### Ticks Cannon 

1. simulation\functions.js -> extendAFrame 
2. simulation\aframe-components\renderIterationsComponent.js 


# Modificación D1

La modificación del código ha de ser progresiva:

> Paso 1
Creación escena sin robot, ya que este añade complejidad. Es importante indicar que el driver utilizado es *ammo* y eliminar la definición de la gravedad, ya que en *cannon* se define de forma diferente, por tanto, si mantenemos esta definición da lugar a error. 

> Paso 2
Creación escena con robot. Para la correcta carga de la escena hemos de definir *ammo-shape* de manera manual, ya que en caso contrario no funciona, por otro lado, es importante tener en cuenta que si los componentes no son definidos no hay valores predeterminados, por ello, no funcionaria. Considero que para determinar valores predeterminados habria que crear un fichero. aunque no es super necesario. 

> Paso 3 
Todos los botones estan relacionado con las físicas, por ello, han de ser modificados para el correcto funcionamiento de las mismas. 

- Reset (simulation\functios.js)

La modificación del botón *reset* es sencilla, ya que hemos de actualizar la forma de determinar los componentes y de establecer la nueva posición/rotación. No funciona perfecto, pero al menos se producen cambios.

- Play / Teleoperator (robots\interfacesRobot.js)

La modificación de estos botones es compleja, ya que hemos de modificar la función *auxiliarPhysics*, los controladores y quizás los *ticks*, aunque estos últimos considero que no es necesario. 

**¿Cómo pasar al nuevo motor de físicas las siguientes líneas?**

        this.commandedVelocityY = this.robot.object3D.velocity.y + this.accelerationPDY;

        this.robot.object3D.velocity.set(this.robot.object3D.velocity.x, this.commandedVelocityY, this.robot.object3D.velocity.z);

